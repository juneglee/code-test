<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
   <mapper  namespace="com.keep.root.dao.PointDao">
   
    <resultMap type="Point" id="PointMap">
	    <id column="point_no"   property="no"/>
	    <result column="user_no"   property="userNo"/>
	    <result column="trader_no"   property="traderNo"/>
	    <result column="point_type"   property="pointType"/>
	    <result column="content"   property="content"/>
	    <result column="price"   property="price"/>
    </resultMap>
   
   <select id="insert" parameterType="Point">
     insert into points
       user_no, trader_no, point_type, content, price
     values(#{userNo}, #{traderNo}, #{pointType}, #{content}, #{price})
     <!-- 
    insert into points (user_no, trader_no, point_type, content,  price )
       values( 4, 2, 2, 2, 20000);
      -->
     
   </select>
   
   <select id="findAll" parameterType="int">
     select 
      p.point_no, p.user_no, p.trader_no, p.point_type, p.content
     from
      points p
     where 
      point_no 
   </select>
   
   <select id="findByNo" parameterType="int">
     select 
      p.user_no
     from
      points p
      inner join users u on p.user_no=u.user_no
     where 
      p.point_no=#{no}
   </select>
   
   <select id="findBytraderNo" parameterType="int">
     select
       p.trader_no 
     from
      points p
      inner join users u on p.trader_no=u.user_no
     where 
      p.point_no=#{no}
   </select>
   
   <update id="update" parameterType="Point">
     update points set
      point_type=#{pointType},
      content=#{content},
      price=#{price}
     where point_no=#{no}
     <!-- 
     update points set
      point_type=2,
      content=2,
      price=80000
     where point_no=2
      -->
   </update>
   
   <delete id="delete" parameterType="int">
    delete from points
    where point_no=#{no}
   </delete>
   
   </mapper>